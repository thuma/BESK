<h1 class="text-center">Volont√§rer</h1>
<table class="table table-sm" v-if="edit==''">
  <thead>
    <tr>
      <th scope="col">Namn</th>
      <th scope="col">E-Post</th>
      <th scope="col">Telefon</th>
      <th scope="col">Kodstuga</th>
      <th scope="col">Utdrag</th>
      <th scope="col">Redigera</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="volont√§r in volont√§rer">
        <td>{{volont√§r.namn}}</td>
        <td>{{volont√§r.epost}}</td>
        <td>{{volont√§r.telefon}}</td>
        <td>{{kodstuga_name_by_id(volont√§r.kodstugor_id)}}</td>
        <td>{{volont√§r.utdrag_datum}}</td>
        <td><button class="btn outline-btn-primary"
            v-on:click="edit={'type':'volont√§r','data':copy(volont√§r)}">üñä</button>
        </td>
    </tr>
  </tbody>
</table>
<button 
    class="btn btn-primary"
    v-if="edit==''"
    v-on:click="edit={'type':'volont√§r','data':{'id':'','namn':'','epost':'','telefon':'','kodstugor_id':''}}"
    >
    Skapa ny
</button>
<h1 class="text-center">Volont√§rer som finns p√• Slack men inte i BESK</h1>
<table class="table table-sm" v-if="edit==''">
  <thead>
    <tr>
      <th scope="col">Namn</th>
      <th scope="col">E-Post</th>
      <th scope="col">Telefon</th>
      <th scope="col">Kodstuga</th>
      <th scope="col">L√§gg till</th>
    </tr>
  </thead>
  <tbody>
    <tr v-for="volont√§r in volont√§rer_slack" v-if="!volont√§r_finns(volont√§r.epost)">
        <td>{{volont√§r.namn}}</td>
        <td>{{volont√§r.epost}}</td>
        <td>{{volont√§r.telefon}}</td>
        <td><div v-for="channel in get_groups_for_volont√§r(volont√§r.slack_id)">{{channel.name}}</div></td>
        <td>
            <button class="btn btn-secondary"
            v-on:click="edit={'type':'volont√§r','data':{'id':'','namn':volont√§r.namn,'epost':volont√§r.epost,'telefon':volont√§r.telefon,'kodstugor_id':''}}">
                L√§gg till i BESK
            </button>
        </td>
    </tr>
  </tbody>
</table>
<div v-if="edit.type=='volont√§r'" class="card">
    <div class="card-body">
        <form method="post" @submit="check_send" action="/api/volontarer">
            <input name="id" v-if="edit.data.id!==''"v-bind:value="edit.data.id" type="hidden">
            <div class="form-group">
                <label>Namn</label>
                <input
                    name="namn"
                    v-model:value="edit.data.namn"
                    type="text"
                    required=""
                    class="form-control">
            </div>
            <div class="form-group">
                <label>E-Post</label>
                <input
                    name="epost"
                    v-model:value="edit.data.epost"
                    required=""
                    class="form-control">
            </div>
            <div class="form-group">
                <label>Telefon</label>
                <input 
                    name="telefon"
                    v-model:value="edit.data.telefon"
                    type="text"
                    required=""
                    class="form-control">
            </div>
            <div class="form-group">
                <label>Utdrag gilltigt till</label>
                <input 
                    name="utdrag_datum"
                    v-model:value="edit.data.utdrag_datum"
                    type="date"
                    required=""
                    class="form-control">
            </div>
            <div class="form-group">
                <label>Kodstuga</label>
                <select name="kodstugor_id" v-model:value="edit.data.kodstugor_id" class="form-control">
                    <option v-for="kodstuga in kodstugor" v-bind:value="kodstuga.id">{{kodstuga.namn}}</option>
                </select>
            </div>
            <div class="form-group">
                <button v-if="edit.data.id==''" type="submit" class="btn btn-primary">Skapa ny</button>
                <button v-else="" type="submit" class="btn btn-primary">Spara</button>
                <button v-on:click="edit=''" type="button" class="btn btn-secondary">Avbryt</button>
                <button v-on:click="radera_volont√§r(edit.data.epost);edit=''" type="button" class="btn btn-danger">Radera</button>
            </div>
        </form>
    </div>
</div>